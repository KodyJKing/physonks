parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"fMZD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modulus=exports.remap=exports.lerp=exports.threshold=exports.clamp=exports.contains2D=exports.contains=exports.randomFloor=exports.equals=void 0;var r=1e-5;function t(t,o){return Math.abs(t-o)<r}function o(r){return Math.floor(Math.random()*r)}function e(r,t,o){return o>=r&&o<=t}function n(r,t,o,n){return e(r.x,r.x+t,n.x)&&e(r.y,r.y+o,n.y)}function s(r,t,o){return o<r?r:o>t?t:o}function u(r,t){return Math.abs(r)<t?0:r}function p(r,t,o){return(t-r)*o+r}function x(r,t,o,e,n){return p(o,e,(n-r)/(t-r))}function a(r,t){return(r%t+t)%t}exports.equals=t,exports.randomFloor=o,exports.contains=e,exports.contains2D=n,exports.clamp=s,exports.threshold=u,exports.lerp=p,exports.remap=x,exports.modulus=a;
},{}],"BIAZ":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0});var a=require("./math/math"),n=function(){function r(){e(this,r),this.lastFrame=performance.now(),this.averageFPS=0}return t(r,[{key:"nextFrame",value:function(){var e=performance.now(),r=e-this.lastFrame;if(this.lastFrame=e,0!=r){var t=1e3/r;this.averageFPS=a.lerp(this.averageFPS,t,.04)}return r}}]),r}();exports.default=n;
},{"./math/math":"fMZD"}],"BaiC":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./math"),u=function(){function e(n,i){t(this,e),this.x=n,this.y=i}return n(e,[{key:"length",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"equivalent",value:function(t){return i.equals(this.x,t.x)&&i.equals(this.y,t.y)}},{key:"unit",value:function(){return this.scale(1/Math.max(this.length(),1e-10))}},{key:"leftNormal",value:function(){return new e(-this.y,this.x)}},{key:"rightNormal",value:function(){return new e(this.y,-this.x)}},{key:"negate",value:function(){return new e(-this.x,-this.y)}},{key:"half",value:function(){return new e(.5*this.x,.5*this.y)}},{key:"copy",value:function(){return new e(this.x,this.y)}},{key:"floor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new e(Math.floor(this.x/t)*t,Math.floor(this.y/t)*t)}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"addXY",value:function(t,n){return new e(this.x+t,this.y+n)}},{key:"addX",value:function(t){return new e(this.x+t,this.y)}},{key:"addY",value:function(t){return new e(this.x,this.y+t)}},{key:"subtract",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"crossZLeft",value:function(t){return new e(-this.y*t,this.x*t)}},{key:"crossZRight",value:function(t){return new e(this.y*t,-this.x*t)}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t)}},{key:"stretch",value:function(t,n){return new e(this.x*t,this.y*n)}},{key:"divide",value:function(t){return new e(this.x/t,this.y/t)}},{key:"lerp",value:function(t,e){return this.scale(1-e).add(t.scale(e))}},{key:"clampAlongAxis",value:function(t,e,n){var u=this.dot(t),r=i.clamp(e,n,u)-u;return this.add(t.scale(r))}},{key:"distance",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}},{key:"distanceSq",value:function(t){return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)}},{key:"rotated",value:function(t){return this.complexProduct(e.polar(t,1))}},{key:"isRightOf",value:function(t){return this.cross(t)>0}},{key:"normalOnSide",value:function(t){return t.isRightOf(this)?this.rightNormal():this.leftNormal()}},{key:"complexProduct",value:function(t){return new e(this.x*t.x-this.y*t.y,this.x*t.y+this.y*t.x)}},{key:"complexQuotient",value:function(t){var n=t.lengthSquared();return new e((this.x*t.x+this.y*t.y)/n,(this.y*t.x-this.x*t.y)/n)}},{key:"complexExponential",value:function(){var t=Math.exp(this.x);return new e(t*Math.cos(this.y),t*Math.sin(this.y))}},{key:"projection",value:function(t){return t.scale(t.dot(this)/t.lengthSquared())}},{key:"projectToLine",value:function(t,e){var n=this.dot(t)-e;return this.subtract(t.scale(n))}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"hot_add",value:function(t,e){return e.set(this.x+t.x,this.y+t.y)}},{key:"hot_subtract",value:function(t,e){return e.set(this.x-t.x,this.y-t.y)}},{key:"hot_crossZLeft",value:function(t,e){return e.set(-this.y*t,this.x*t)}},{key:"hot_crossZRight",value:function(t,e){return e.set(this.y*t,-this.x*t)}},{key:"hot_scale",value:function(t,e){return e.set(this.x*t,this.y*t)}},{key:"hot_leftNormal",value:function(t){return t.set(-this.y,this.x)}},{key:"hot_rightNormal",value:function(t){return t.set(this.y,-this.x)}},{key:"hot_unit",value:function(t){var e=1/this.length();return t.set(this.x*e,this.y*e)}}],[{key:"polar",value:function(t,n){return new e(Math.cos(t)*n,Math.sin(t)*n)}}]),e}();exports.default=u,u.zero=new u(0,0),u.one=new u(1,1),u.right=new u(1,0),u.down=new u(0,1);
},{"./math":"fMZD"}],"gxTK":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.initCanvas=exports.boxPolygon=exports.polygon=exports.sampleSupport=exports.notQuiteInfiniteMass=void 0;var e=t(require("./math/Vector"));function n(t,n){for(var o=[],r=0;r<t;r++){var a=2*Math.PI*r/t;o.push(n(e.default.polar(a,1)))}return o}function o(t,n){for(var o=[],r=0;r<t;r++)o.push(new e.default(Math.cos(2*Math.PI/t*r)*n,Math.sin(2*Math.PI/t*r)*n));return o}function r(t,n){var o=t/2,r=n/2;return[new e.default(-o,-r),new e.default(o,-r),new e.default(o,r),new e.default(-o,r)]}function a(){var t=document.getElementById("mainCanvas");function e(){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}return e(),window.addEventListener("resize",function(t){return e()}),t}exports.notQuiteInfiniteMass=1e32,exports.sampleSupport=n,exports.polygon=o,exports.boxPolygon=r,exports.initCanvas=a;
},{"./math/Vector":"BaiC"}],"lP0K":[function(require,module,exports) {
"use strict";function e(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function a(e,a){for(var r=0;r<a.length;r++){var s=a[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function r(e,r,s){return r&&a(e.prototype,r),s&&a(e,s),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Colors=exports.rgba=exports.rgb=void 0;var s=require("../math/math");function f(e,a,r){return new n(e,a,r)}function p(e,a,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new n(e,a,r,s)}exports.rgb=f,exports.rgba=p;var n=function(){function a(r,s,f){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e(this,a),this.r=r,this.g=s,this.b=f,this.a=p}return r(a,[{key:"lerp",value:function(e,r){return new a(s.lerp(this.r,e.r,r),s.lerp(this.g,e.g,r),s.lerp(this.b,e.b,r),s.lerp(this.a,e.a,r))}},{key:"toString",value:function(){return"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a,")")}}],[{key:"parse",value:function(e){if("#"==e[0]){var r=e.match(/[0-9a-f]{2,2}/gi).map(function(e){return parseInt(e,16)});return new a(r[0],r[1],r[2],(r[3]||255)/255)}if(-1==e.indexOf("(")){var s=a[e];if(!s)throw new Error("unrecognized color "+e);return s}var f=e.match(/\w+/)[0],p=e.match(/\d+/g).map(function(e){return parseFloat(e)});switch(f){case"rgb":return new a(p[0],p[1],p[2]);case"rgba":return new a(p[0],p[1],p[2],p[3])}throw new Error("unrecognized type")}}]),a}();exports.default=n;var t=function a(){e(this,a)};exports.Colors=t,t.aliceblue=n.parse("#f0f8ff"),t.antiquewhite=n.parse("#faebd7"),t.aqua=n.parse("#00ffff"),t.aquamarine=n.parse("#7fffd4"),t.azure=n.parse("#f0ffff"),t.beige=n.parse("#f5f5dc"),t.bisque=n.parse("#ffe4c4"),t.black=n.parse("#000000"),t.blanchedalmond=n.parse("#ffebcd"),t.blue=n.parse("#0000ff"),t.blueviolet=n.parse("#8a2be2"),t.brown=n.parse("#a52a2a"),t.burlywood=n.parse("#deb887"),t.cadetblue=n.parse("#5f9ea0"),t.chartreuse=n.parse("#7fff00"),t.chocolate=n.parse("#d2691e"),t.coral=n.parse("#ff7f50"),t.cornflowerblue=n.parse("#6495ed"),t.cornsilk=n.parse("#fff8dc"),t.crimson=n.parse("#dc143c"),t.cyan=n.parse("#00ffff"),t.darkblue=n.parse("#00008b"),t.darkcyan=n.parse("#008b8b"),t.darkgoldenrod=n.parse("#b8860b"),t.darkgray=n.parse("#a9a9a9"),t.darkgreen=n.parse("#006400"),t.darkgrey=n.parse("#a9a9a9"),t.darkkhaki=n.parse("#bdb76b"),t.darkmagenta=n.parse("#8b008b"),t.darkolivegreen=n.parse("#556b2f"),t.darkorange=n.parse("#ff8c00"),t.darkorchid=n.parse("#9932cc"),t.darkred=n.parse("#8b0000"),t.darksalmon=n.parse("#e9967a"),t.darkseagreen=n.parse("#8fbc8f"),t.darkslateblue=n.parse("#483d8b"),t.darkslategray=n.parse("#2f4f4f"),t.darkslategrey=n.parse("#2f4f4f"),t.darkturquoise=n.parse("#00ced1"),t.darkviolet=n.parse("#9400d3"),t.deeppink=n.parse("#ff1493"),t.deepskyblue=n.parse("#00bfff"),t.dimgray=n.parse("#696969"),t.dimgrey=n.parse("#696969"),t.dodgerblue=n.parse("#1e90ff"),t.firebrick=n.parse("#b22222"),t.floralwhite=n.parse("#fffaf0"),t.forestgreen=n.parse("#228b22"),t.fuchsia=n.parse("#ff00ff"),t.gainsboro=n.parse("#dcdcdc"),t.ghostwhite=n.parse("#f8f8ff"),t.goldenrod=n.parse("#daa520"),t.gold=n.parse("#ffd700"),t.gray=n.parse("#808080"),t.green=n.parse("#008000"),t.greenyellow=n.parse("#adff2f"),t.grey=n.parse("#808080"),t.honeydew=n.parse("#f0fff0"),t.hotpink=n.parse("#ff69b4"),t.indianred=n.parse("#cd5c5c"),t.indigo=n.parse("#4b0082"),t.ivory=n.parse("#fffff0"),t.khaki=n.parse("#f0e68c"),t.lavenderblush=n.parse("#fff0f5"),t.lavender=n.parse("#e6e6fa"),t.lawngreen=n.parse("#7cfc00"),t.lemonchiffon=n.parse("#fffacd"),t.lightblue=n.parse("#add8e6"),t.lightcoral=n.parse("#f08080"),t.lightcyan=n.parse("#e0ffff"),t.lightgoldenrodyellow=n.parse("#fafad2"),t.lightgray=n.parse("#d3d3d3"),t.lightgreen=n.parse("#90ee90"),t.lightgrey=n.parse("#d3d3d3"),t.lightpink=n.parse("#ffb6c1"),t.lightsalmon=n.parse("#ffa07a"),t.lightseagreen=n.parse("#20b2aa"),t.lightskyblue=n.parse("#87cefa"),t.lightslategray=n.parse("#778899"),t.lightslategrey=n.parse("#778899"),t.lightsteelblue=n.parse("#b0c4de"),t.lightyellow=n.parse("#ffffe0"),t.lime=n.parse("#00ff00"),t.limegreen=n.parse("#32cd32"),t.linen=n.parse("#faf0e6"),t.magenta=n.parse("#ff00ff"),t.maroon=n.parse("#800000"),t.mediumaquamarine=n.parse("#66cdaa"),t.mediumblue=n.parse("#0000cd"),t.mediumorchid=n.parse("#ba55d3"),t.mediumpurple=n.parse("#9370db"),t.mediumseagreen=n.parse("#3cb371"),t.mediumslateblue=n.parse("#7b68ee"),t.mediumspringgreen=n.parse("#00fa9a"),t.mediumturquoise=n.parse("#48d1cc"),t.mediumvioletred=n.parse("#c71585"),t.midnightblue=n.parse("#191970"),t.mintcream=n.parse("#f5fffa"),t.mistyrose=n.parse("#ffe4e1"),t.moccasin=n.parse("#ffe4b5"),t.navajowhite=n.parse("#ffdead"),t.navy=n.parse("#000080"),t.oldlace=n.parse("#fdf5e6"),t.olive=n.parse("#808000"),t.olivedrab=n.parse("#6b8e23"),t.orange=n.parse("#ffa500"),t.orangered=n.parse("#ff4500"),t.orchid=n.parse("#da70d6"),t.palegoldenrod=n.parse("#eee8aa"),t.palegreen=n.parse("#98fb98"),t.paleturquoise=n.parse("#afeeee"),t.palevioletred=n.parse("#db7093"),t.papayawhip=n.parse("#ffefd5"),t.peachpuff=n.parse("#ffdab9"),t.peru=n.parse("#cd853f"),t.pink=n.parse("#ffc0cb"),t.plum=n.parse("#dda0dd"),t.powderblue=n.parse("#b0e0e6"),t.purple=n.parse("#800080"),t.rebeccapurple=n.parse("#663399"),t.red=n.parse("#ff0000"),t.rosybrown=n.parse("#bc8f8f"),t.royalblue=n.parse("#4169e1"),t.saddlebrown=n.parse("#8b4513"),t.salmon=n.parse("#fa8072"),t.sandybrown=n.parse("#f4a460"),t.seagreen=n.parse("#2e8b57"),t.seashell=n.parse("#fff5ee"),t.sienna=n.parse("#a0522d"),t.silver=n.parse("#c0c0c0"),t.skyblue=n.parse("#87ceeb"),t.slateblue=n.parse("#6a5acd"),t.slategray=n.parse("#708090"),t.slategrey=n.parse("#708090"),t.snow=n.parse("#fffafa"),t.springgreen=n.parse("#00ff7f"),t.steelblue=n.parse("#4682b4"),t.tan=n.parse("#d2b48c"),t.teal=n.parse("#008080"),t.thistle=n.parse("#d8bfd8"),t.tomato=n.parse("#ff6347"),t.turquoise=n.parse("#40e0d0"),t.violet=n.parse("#ee82ee"),t.wheat=n.parse("#f5deb3"),t.white=n.parse("#ffffff"),t.whitesmoke=n.parse("#f5f5f5"),t.yellow=n.parse("#ffff00"),t.yellowgreen=n.parse("#9acd32"),t.transparent=p(0,0,0,0);
},{"../math/math":"fMZD"}],"baw2":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),t}var o=this&&this.__createBinding||(Object.create?function(t,i,e,o){void 0===o&&(o=e),Object.defineProperty(t,o,{enumerable:!0,get:function(){return i[e]}})}:function(t,i,e,o){void 0===o&&(o=e),t[o]=i[e]}),n=this&&this.__setModuleDefault||(Object.create?function(t,i){Object.defineProperty(t,"default",{enumerable:!0,value:i})}:function(t,i){t.default=i}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)"default"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&o(i,t,e);return n(i,t),i},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var l=require("../common"),a=r(require("../graphics/Color")),u=require("../math/math"),h=s(require("../math/Vector")),c=function(){function i(e){var o,n,r,s,u,c,d;t(this,i),this.position=e.position,this.velocity=null!==(o=e.velocity)&&void 0!==o?o:new h.default(0,0),this.angle=null!==(n=e.angle)&&void 0!==n?n:0,this.angularVelocity=null!==(r=e.angularVelocity)&&void 0!==r?r:0,this.collider=e.collider,this.collider.body=this,this.collider.onUpdatePosition(),this.isStatic=null!==(s=e.isStatic)&&void 0!==s&&s,this.mass=this.isStatic?l.notQuiteInfiniteMass:null!==(u=e.mass)&&void 0!==u?u:1,this.invMass=1/this.mass,this.inertia=this.isStatic?l.notQuiteInfiniteMass:null!==(c=e.inertia)&&void 0!==c?c:1,this.invInertia=1/this.inertia,this.color=null!==(d=e.color)&&void 0!==d?d:"grey",this.outlineColor=a.default.parse(this.color).lerp(a.Colors.black,.05).toString(),this.id=i.idCounter++,this.positionalCorrection=new h.default(0,0)}return e(i,[{key:"getBounds",value:function(){return this.collider.bounds}},{key:"healthCheck",value:function(){var t=this.position,i=t.x,e=t.y;if(isNaN(i)||isNaN(e))throw new Error("NaN component!")}},{key:"updateVelocity",value:function(t,i,e,o){this.isStatic||(this.angularVelocity*=e,this.velocity.x*=o,this.velocity.y*=o,this.velocity.y+=i*t,this.positionalCorrection.x=0,this.positionalCorrection.y=0)}},{key:"updatePosition",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;if(!this.isStatic){var o=this.velocity.x*t,n=this.velocity.y*t,r=this.angularVelocity*t;this.position.x+=u.threshold(o,i),this.position.y+=u.threshold(n,i),this.angle+=u.threshold(r,e),this.collider.onUpdatePosition(),this.healthCheck()}}}]),i}();exports.default=c,c.idCounter=0;
},{"../common":"gxTK","../graphics/Color":"lP0K","../math/math":"fMZD","../math/Vector":"BaiC"}],"et32":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=o(require("./math/Vector")),s=function(){function t(){e(this,t),this.keys=new Map,this.mouse=new Map,this.cursor=new r.default(0,0),this.watchCursor(),this.watchMouse(),this.watchKeys()}return n(t,[{key:"watchKeys",value:function(){var e=this;console.log("starting key watch"),window.addEventListener("keydown",function(t){return e.keys.set(t.key.toLowerCase(),!0)}),window.addEventListener("keyup",function(t){return e.keys.set(t.key.toLowerCase(),!1)})}},{key:"watchMouse",value:function(){var e=this;console.log("starting mouse watch"),window.addEventListener("mousedown",function(t){return e.mouse.set(t.button,!0)}),window.addEventListener("mouseup",function(t){return e.mouse.set(t.button,!1)})}},{key:"watchCursor",value:function(){var e=this;console.log("starting cursor watch"),window.addEventListener("mousemove",function(t){return e.cursor=new r.default(t.x,t.y)})}}]),t}();exports.default=s;
},{"./math/Vector":"BaiC"}],"Lw8n":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../math/math"),o=function(){function t(){e(this,t)}return n(t,null,[{key:"stroke",value:function(e){return e&&(t.context.strokeStyle=e),t.context.stroke(),t}},{key:"fill",value:function(e){return e&&(t.context.fillStyle=e),t.context.fill(),t}},{key:"save",value:function(){return t.context.save(),t}},{key:"restore",value:function(){return t.context.restore(),t}},{key:"vTranslate",value:function(e){return t.context.translate(e.x,e.y),t}},{key:"vLine",value:function(e,n){var r=t.context;return r.beginPath(),r.moveTo(e.x,e.y),r.lineTo(n.x,n.y),t}},{key:"line",value:function(e,n,r,o){var u=t.context;return u.beginPath(),u.moveTo(e,n),u.lineTo(r,o),t}},{key:"vCircle",value:function(e,n){return t.context.beginPath(),t.context.arc(e.x,e.y,n,0,2*Math.PI),t}},{key:"circle",value:function(e,n,r){return t.context.beginPath(),t.context.arc(e,n,r,0,2*Math.PI),t}},{key:"vRect",value:function(e,n,r){return t.context.rect(e.x,e.y,n,r),t}},{key:"rect",value:function(e,n,r,o){return t.context.rect(e,n,r,o),t}},{key:"polygon",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=t.context;if(0==e.length)return t;var u=function(t){if(0==n)return e[t];var o=e[r.modulus(t-1,e.length)],u=e[t],a=e[(t+1)%e.length],c=u.subtract(o).unit(),l=a.subtract(u).unit(),i=c.lerp(l,.5).rightNormal().unit();return u.add(i.scale(n))},a=u(0);o.beginPath(),o.moveTo(a.x,a.y);for(var c=1;c<e.length;c++)a=u(c),o.lineTo(a.x,a.y);return o.closePath(),t}}]),t}();exports.default=o;
},{"../math/math":"fMZD"}],"dJxS":[function(require,module,exports) {
"use strict";function n(n,e){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=t(n))||e&&n&&"number"==typeof n.length){r&&(n=r);var i=0,a=function(){};return{s:a,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,m=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return u=n.done,n},e:function(n){m=!0,o=n},f:function(){try{u||null==r.return||r.return()}finally{if(m)throw o}}}}function t(n,t){if(n){if("string"==typeof n)return e(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,t):void 0}}function e(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function i(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function a(n,t,e){return t&&i(n.prototype,t),e&&i(n,e),n}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){function t(n,e,i,a){r(this,t),this.minx=n,this.miny=e,this.maxx=i,this.maxy=a}return a(t,[{key:"width",value:function(){return this.maxx-this.minx}},{key:"height",value:function(){return this.maxy-this.miny}},{key:"hull",value:function(n,e){function r(n,t){return Math.min(n,t)}function i(n,t){return Math.max(n,t)}return new t(r(n.minx,e.minx),r(n.miny,e.miny),i(n.maxx,e.maxx),i(n.maxy,e.maxy))}},{key:"overlaps",value:function(n){var t=this,e=n;return t.minx<=e.maxx&&t.maxx>=e.minx&&t.miny<=e.maxy&&t.maxy>=e.miny}},{key:"addPoint",value:function(n){this.minx=Math.min(this.minx,n.x),this.miny=Math.min(this.miny,n.y),this.maxx=Math.max(this.maxx,n.x),this.maxy=Math.max(this.maxy,n.y)}},{key:"addAABB",value:function(n){var t=this,e=n;t.minx=Math.min(t.minx,e.minx),t.miny=Math.min(t.miny,e.miny),t.maxx=Math.max(t.maxx,e.maxx),t.maxy=Math.max(t.maxy,e.maxy)}},{key:"contains",value:function(n){var t=this.minx,e=this.miny,r=this.maxx,i=this.maxy;return n.x>=t&&n.x<=r&&n.y>=e&&n.y<=i}}],[{key:"fromDimensions",value:function(n,e){return new t(n.x,n.y,n.x+e.x,n.y+e.y)}},{key:"empty",value:function(){return new t(1/0,1/0,-1/0,-1/0)}},{key:"polygonBounds",value:function(e){var r,i=t.empty(),a=n(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.addPoint(o)}}catch(u){a.e(u)}finally{a.f()}return i}}]),t}();exports.default=o;
},{}],"ZtYr":[function(require,module,exports) {
"use strict";function n(n){return e(n)||r(n)||u(n)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}function e(n){if(Array.isArray(n))return a(n)}function i(n,t){return l(n)||c(n,t)||u(n,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(n,t){if(n){if("string"==typeof n)return a(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(n,t):void 0}}function a(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function c(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,i,o=[],u=!0,a=!1;try{for(r=r.call(n);!(u=(e=r.next()).done)&&(o.push(e.value),!t||o.length!==t);u=!0);}catch(c){a=!0,i=c}finally{try{u||null==r.return||r.return()}finally{if(a)throw i}}return o}}function l(n){if(Array.isArray(n))return n}function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function s(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function m(n,t,r){return t&&s(n.prototype,t),r&&s(n,r),n}var h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(exports,"__esModule",{value:!0});var v=h(require("./Vector")),y=1e-6,p=function(){function n(t,r,e,i,o,u,a,c,l){f(this,n),this.m11=0,this.m12=0,this.m13=0,this.m21=0,this.m22=0,this.m23=0,this.m31=0,this.m32=0,this.m33=0,this.m11=t,this.m12=r,this.m13=e,this.m21=i,this.m22=o,this.m23=u,this.m31=a,this.m32=c,this.m33=l}return m(n,[{key:"multiply",value:function(t){return j(this,t,n)}},{key:"inverse",value:function(){return M(this,n)}},{key:"determinant",value:function(){return g(this,n)}},{key:"equals",value:function(t){return k(this,t,y,n)}},{key:"multiplyVec",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new v.default(0,0),e=this.m11,i=this.m12,o=this.m13,u=this.m21,a=this.m22,c=this.m23,l=n.x,f=n.y;return r.x=e*l+i*f+o*t,r.y=u*l+a*f+c*t,r}},{key:"print",value:function(){var n=this.m11,t=this.m12,r=this.m13,e=this.m21,i=this.m22,o=this.m23,u=this.m31,a=this.m32,c=this.m33,l=[[n,t,r],[e,i,o],[u,a,c]],f=[[n,e,u],[t,i,a],[r,o,c]].map(function(n){return n.map(function(n){return n.toString().length}).reduce(function(n,t){return Math.max(n,t)})}),s=function(n,t){return n.toString().padStart(f[t])},m=l.map(function(n){return"| "+n.map(s).join("  ")+" |"}).join("\n");console.log(m)}}],[{key:"translation",value:function(){return new n(1,0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,0,1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,0,0,1)}},{key:"vTranslation",value:function(t){return new n(1,0,t.x,0,1,t.y,0,0,1)}},{key:"rotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=Math.sin(t),e=Math.cos(t);return new n(e,-r,0,r,e,0,0,0,1)}},{key:"scale",value:function(){return new n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,0,0,0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,0,0,0,1)}},{key:"transformation",value:function(t,r,e,i,o,u,a){var c=t,l=r,f=e,s=i,m=o,h=u,v=a,y=Math.sin(f),p=Math.cos(f);return new n(s*p,-m*y,c*s*p-l*m*y+h,s*y,m*p,c*s*y+l*m*p+v,0,0,1)}},{key:"scaleAndTranslate",value:function(t,r,e){return new n(t,0,r,0,t,e,0,0,1)}}]),n}();function d(n){for(var t=[],r=1;r<=n;r++)t.push(r);return t}function A(n,t,r,e){return"( "+n+" * "+e+" - "+t+" * "+r+" )"}function b(n){var t=i(n,9),r=t[0],e=t[1],o=t[2],u=t[3],a=t[4],c=t[5],l=t[6],f=t[7],s=t[8];return"(".concat(r," * ").concat(A(a,c,f,s)," -\n    ").concat(e," * ").concat(A(u,c,l,s)," +\n    ").concat(o," * ").concat(A(u,a,l,f),")")}function w(n){return"let {\n    "+d(3).map(function(t){return d(3).map(function(r){return"m"+t+r+": "+n+t+r}).join(", ")}).join(",\n    ")+"\n} = "+n}exports.default=p,p.identity=new p(1,0,0,0,1,0,0,0,1);var g=function(){var n="return "+b(d(3).map(function(n){return d(3).map(function(t){return"A.m"+n+t})}).flat());return new Function("A","Matrix3",n)}(),j=function(){var n=w("A"),t=w("B"),r=d(3).map(function(n){return d(3).map(function(t){return d(3).map(function(r){return"A"+n+r+" * B"+r+t}).join(" + ")}).join(", ")}).join(",\n    "),e=[n,t,"return new Matrix3(\n    ".concat(r,"\n)")].join("\n");return new Function("A","B","Matrix3",e)}(),M=function(){var n=w("A"),t="let c = 1 / "+b(d(3).map(function(n){return d(3).map(function(t){return"A"+n+t})}).flat()),r=function(n,t,r,e){return A("A"+n,"A"+t,"A"+r,"A"+e)},e=[[r(22,23,32,33),"-"+r(12,13,32,33),r(12,13,22,23)],["-"+r(21,23,31,33),r(11,13,31,33),"-"+r(11,13,21,23)],[r(21,22,31,32),"-"+r(11,12,31,32),r(11,12,21,22)]].map(function(n){return n.map(function(n){return n+" * c"}).join(", ")}).join(",\n    "),i=[n,t,"\nreturn new Matrix3(".concat(e,")")].join("\n");return new Function("A","Matrix3",i)}(),k=function(){var t=w("A"),r=w("B"),e=d(3).map(function(n){return d(3).map(function(t){var r=n.toString()+t.toString();return"if (Math.abs(A".concat(r," - B").concat(r,") > epsilon) return false")})}).flat(),i=[t,r].concat(n(e),["return true"]).join("\n");return new Function("A","B","epsilon","Matrix3",i)}();
},{"./Vector":"BaiC"}],"XESg":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var o=n(require("../math/AABB")),i=n(require("../math/Matrix")),s=function(){function e(r){t(this,e),this.model=r,this.vertices=[];for(var n=0;n<r.length;n++)this.vertices.push(r[n].copy());this.bounds=new o.default(0,0,0,0)}return r(e,[{key:"support",value:function(t){for(var e=this.vertices,r=e[0],n=r.dot(t),o=1;o<e.length;o++){var i=e[o],s=i.dot(t);s>n&&(r=i,n=s)}return r}},{key:"onUpdatePosition",value:function(){for(var t=this.body.position,e=t.x,r=t.y,n=this.body.angle,s=i.default.transformation(0,0,n,1,1,e,r),u=0;u<this.model.length;u++)s.multiplyVec(this.model[u],1,this.vertices[u]);this.bounds=o.default.polygonBounds(this.vertices)}}]),e}();exports.default=s;
},{"../math/AABB":"dJxS","../math/Matrix":"ZtYr"}],"Bjdp":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=i(require("../math/AABB")),o=function(){function e(n){t(this,e),this.radius=n}return n(e,[{key:"support",value:function(t){return this.body.position.add(t.unit().scale(this.radius))}},{key:"onUpdatePosition",value:function(){var t=this.radius,e=this.body.position,n=e.x,i=e.y;this.bounds=new r.default(n-t,i-t,n+t,i+t)}}]),e}();exports.default=o;
},{"../math/AABB":"dJxS"}],"HkVW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={polygon:function(n){return function(t){for(var r=n[0],e=r.dot(t),u=1;u<n.length;u++){var o=n[u],i=o.dot(t);i>e&&(r=o,e=i)}return r}},transform:function(n,t){var r=t.inverse();return function(e){return t.multiplyVec(n(r.multiplyVec(e,0)))}},round:function(n,t){return function(r){return n(r).add(r.unit().scale(t))}},translate:function(n,t){return function(r){return n(r).add(t)}}};exports.default=n;
},{}],"KUnX":[function(require,module,exports) {
"use strict";function t(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=e(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){l=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw i}}}}function e(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var u=i(require("../math/AABB")),l=require("../math/math"),f=function(){function e(){n(this,e)}return o(e,null,[{key:"findPairs",value:function(e,r,n){var a,o=u.default.empty(),i=t(e);try{for(i.s();!(a=i.n()).done;){var f=a.value;o.addAABB(f.getBounds())}}catch(G){i.e(G)}finally{i.f()}var c,s=o.width(),d=o.height(),h=Math.ceil(s/r),v=Math.ceil(d/r),y=function(t){return l.clamp(0,h-1,Math.floor(l.remap(o.minx,o.maxx,0,h-1,t)))},m=function(t){return l.clamp(0,v-1,Math.floor(l.remap(o.miny,o.maxy,0,v-1,t)))},p=new Map,g=t(e);try{for(g.s();!(c=g.n()).done;)for(var b=c.value,x=b.getBounds(),w=y(x.minx),A=y(x.maxx),M=m(x.miny),B=m(x.maxy),S=w;S<=A;S++)for(var _=M;_<=B;_++){var j,O=S*v+_;p.has(O)||p.set(O,[]),null===(j=p.get(O))||void 0===j||j.push(b)}}catch(G){g.e(G)}finally{g.f()}var I,P=new Set,k=t(p.values());try{for(k.s();!(I=k.n()).done;)for(var q=I.value,C=0;C<q.length;C++)for(var E=q[C],T=E.getBounds(),D=C+1;D<q.length;D++){var U=q[D],$=U.getBounds();if(T.overlaps($)){var z=Math.min(E.id,U.id),F=Math.max(E.id,U.id)<<16|z;P.has(F)||(P.add(F),n(E,U))}}}catch(G){k.e(G)}finally{k.f()}}}]),e}();exports.default=f;
},{"../math/AABB":"dJxS","../math/math":"fMZD"}],"EouI":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.shapecast=exports.generateContacts=exports.polygonVsPolygon=exports.getCollisionInfo=exports.getCollisionPairs=void 0;var o=require("../math/math"),e=t(require("../math/SupportFunctions")),r=t(require("../math/Vector")),a=t(require("./Broadphase")),n=t(require("./CircleCollider")),i=t(require("./PolygonCollider"));function l(t,o){var e=[];return a.default.findPairs(t,o,function(t,o){var r=s(t.collider,o.collider);r&&r.separation<=0&&e.push({bodyA:t,bodyB:o,info:r})}),e}function s(t,o){return t instanceof i.default&&o instanceof i.default?c(t.vertices,o.vertices):t instanceof n.default&&o instanceof n.default?u(t,o):t instanceof i.default&&o instanceof n.default?d(t,o,1):t instanceof n.default&&o instanceof i.default?d(o,t,-1):void 0}function u(t,o){var e=t.body.position,r=o.body.position.subtract(e),a=r.length()-t.radius-o.radius,n=r.unit(),i=[e.add(n.scale(t.radius+a/2))];return{normal:n,separation:a,contact:i}}function c(t,a){var n=e.default.polygon(t),i=e.default.polygon(a),l=r.default.zero,s=-1/0;function u(t,e,r){for(var a=0;a<t.length;a++){var n=o.modulus(a+1,t.length),i=t[a],u=t[n].subtract(i).leftNormal().unit(),c=i.dot(u)-e(u).dot(u);c>s&&(s=c,l=u.scale(r))}return{separation:s,normal:l}}u(t,i,-1),u(a,n,1);var c=f(n,i,l);return{normal:l,separation:s,contact:c}}function d(t,e,a){for(var n=e.body.position,i=t.vertices,l=-1/0,s=r.default.zero,u=0;u<i.length;u++){var c=o.modulus(u+1,i.length),d=i[u],f=i[c].subtract(d).rightNormal().unit(),p=e.support(f.negate()).dot(f)-d.dot(f);p>l&&(l=p,s=f.scale(a));var g=n.subtract(d).unit();(p=e.support(g.negate()).dot(g)-t.support(g).dot(g))>l&&(l=p,s=g.scale(a))}var m=s.scale(-a);return{normal:s,separation:l,contact:[n.add(m.scale(e.radius+l/2))]}}function f(t,o,e){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.01,n=r.default.polar(a,1),i=e.complexProduct(n),l=e.complexQuotient(n),s=t(l),u=t(i),c=o(i.negate()),d=o(l.negate()),f=e.rightNormal(),p=Math.min(s.dot(f),c.dot(f)),g=Math.max(u.dot(f),d.dot(f)),m=s.clampAlongAxis(f,g,p),v=u.clampAlongAxis(f,g,p),h=c.clampAlongAxis(f,g,p),x=d.clampAlongAxis(f,g,p),b=m.lerp(h,.5),y=v.lerp(x,.5);return p-g<1?[b]:[b.lerp(y,.5),b,y]}function p(t,o,e,r){return g(function(o){return t(o).subtract(e(o.negate()))},r.subtract(o))}function g(t,o){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=t(o.rightNormal()),a=t(o.leftNormal());if(!(r.dot(o.rightNormal())<0||a.dot(o.leftNormal())<0))for(var n=0;;){var i=a.subtract(r),l=r.negate(),s=i.normalOnSide(l),u=t(s);if(++n==e||u.equivalent(r)||u.equivalent(a)){var c=s.unit();return{time:c.dot(r)/c.dot(o),normal:c}}u.dot(o.rightNormal())>0?r=u:a=u}}exports.getCollisionPairs=l,exports.getCollisionInfo=s,exports.polygonVsPolygon=c,exports.generateContacts=f,exports.shapecast=p;
},{"../math/math":"fMZD","../math/SupportFunctions":"HkVW","../math/Vector":"BaiC","./Broadphase":"KUnX","./CircleCollider":"Bjdp","./PolygonCollider":"XESg"}],"HMXu":[function(require,module,exports) {
"use strict";function t(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=o(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){s=!0,a=t},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function o(t,o){if(t){if("string"==typeof t)return r(t,o);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,o):void 0}}function r(t,o){(null==o||o>t.length)&&(o=t.length);for(var r=0,n=new Array(o);r<o;r++)n[r]=t[r];return n}function n(o,r){for(var n=r.iterations,e=r.positionalDamping,i=r.allowedPenetration,a=0;a<n;a++){var l,s=t(o);try{for(s.s();!(l=s.n()).done;){var c=l.value,u=c.bodyA,f=c.bodyB,y=c.info,p=y.normal,d=y.separation,v=u.mass,m=f.mass,b=(-d-p.dot(f.positionalCorrection.subtract(u.positionalCorrection))-i)*e;if(!(b<0)){var x=b/(1+m/v),h=b-x;u.isStatic||(u.position.x-=p.x*h,u.position.y-=p.y*h,u.positionalCorrection.x-=p.x*h,u.positionalCorrection.y-=p.y*h),f.isStatic||(f.position.x+=p.x*x,f.position.y+=p.y*x,f.positionalCorrection.x+=p.x*x,f.positionalCorrection.y+=p.y*x)}}}catch(g){s.e(g)}finally{s.f()}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],"KTNL":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i=t(require("../math/Vector"));function o(t,o){for(var e=o.iterations,a=o.minBounceVelocity,r=o.restitution,s=o.coefficientOfFriction,n=0;n<e;n++)for(var c=0;c<t.length;c++)for(var l=t[c],v=l.bodyA,u=l.bodyB,y=l.info,f=y.normal,d=y.contact,M=0;M<d.length;M++){var h=d[M],p=h.subtract(v.position),g=h.subtract(u.position),x=p.cross(f),b=g.cross(f),V=v.velocity.add(p.crossZLeft(v.angularVelocity)),_=u.velocity.add(g.crossZLeft(u.angularVelocity)).subtract(V),m=_.lengthSquared()<Math.pow(a,2)?0:r,w=1/(v.invMass+u.invMass+Math.pow(x,2)*v.invInertia+Math.pow(b,2)*u.invInertia),I=_.dot(f)*(1+m)*w;if(!(I>=0)){var S=f.leftNormal(),q=I*s*-Math.sign(_.dot(S)),B=new i.default(f.x*I+S.x*q,f.y*I+S.y*q);v.isStatic||(v.velocity.x+=B.x*v.invMass,v.velocity.y+=B.y*v.invMass,v.angularVelocity+=p.cross(B)*v.invInertia),u.isStatic||(u.velocity.x-=B.x*u.invMass,u.velocity.y-=B.y*u.invMass,u.angularVelocity-=g.cross(B)*u.invInertia)}}}exports.default=o;
},{"../math/Vector":"BaiC"}],"Ku4o":[function(require,module,exports) {
"use strict";function e(e,r){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=t(e))||r&&e&&"number"==typeof e.length){i&&(e=i);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==i.return||i.return()}finally{if(s)throw a}}}}function t(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var l=a(require("./collision/CircleCollider")),s=require("./collision/Collision"),u=a(require("./collision/PolygonCollider")),c=a(require("./dynamics/solvePositions")),f=a(require("./dynamics/solveVelocities")),d=a(require("./graphics/Drawing")),v=a(require("./math/Vector")),p=function(){function t(e){i(this,t),this.bodies=[],this.pairs=[],this.options=e}return n(t,[{key:"fixedUpdate",value:function(){var t,r=this.options,i=r.timeStep,o=r.linearMotionThreshold,n=r.angularMotionThreshold,a=r.gravity,l=r.rotationalAirDrag,u=r.linearAirDrag,d=r.broadphaseCellSize,v=r.velocitySolverOptions,p=r.positionalSolverOptions,h=e(this.bodies);try{for(h.s();!(t=h.n()).done;){var y=t.value;y.updatePosition(i,o,n),y.updateVelocity(i,a,l,u)}}catch(g){h.e(g)}finally{h.f()}this.pairs=s.getCollisionPairs(this.bodies,d),f.default(this.pairs,v),c.default(this.pairs,p)}},{key:"renderToCanvas",value:function(t,r){var i;r=null!==(i=r)&&void 0!==i?i:{},d.default.context=t,t.lineWidth=2,t.lineCap="round",t.lineJoin="round";var o,n=e(this.bodies);try{for(n.s();!(o=n.n()).done;){var a=o.value,s=this.options.positionalSolverOptions.allowedPenetration+t.lineWidth;a.collider instanceof u.default?(d.default.polygon(a.collider.vertices).fill(a.color),r.drawOutlines&&d.default.polygon(a.collider.vertices,-s).stroke(a.outlineColor)):a.collider instanceof l.default&&(d.default.vCircle(a.position,a.collider.radius).fill(a.color),r.drawOutlines&&d.default.vCircle(a.position,a.collider.radius-s).stroke(a.outlineColor));var c=a.position;r.drawPosition&&d.default.vCircle(c,3).fill("white"),r.drawOrientation&&d.default.vLine(c,c.add(v.default.polar(a.angle,10))).stroke("white")}}catch(O){n.e(O)}finally{n.f()}if(r.drawContacts||r.drawPairEdges){var f,p=e(this.pairs);try{for(p.s();!(f=p.n()).done;){var h=f.value;if(r.drawContacts){var y,g=h.info.normal.scale(5),b=e(h.info.contact);try{for(b.s();!(y=b.n()).done;){var w=y.value;d.default.vCircle(w,2).fill("white"),d.default.vLine(w.subtract(g),w.add(g)).stroke("rgba(255, 255, 255, .5)")}}catch(O){b.e(O)}finally{b.f()}}if(r.drawPairEdges){var m=h.bodyA,C=h.bodyB;if(m.isStatic||C.isStatic)continue;var S=m.position,P=C.position;d.default.vLine(S,P).stroke("white")}}}catch(O){p.e(O)}finally{p.f()}}}},{key:"averagePenetration",value:function(){var e=this.pairs;return e.length>0?e.map(function(e){return Math.max(0,-e.info.separation)}).reduce(function(e,t){return e+t})/e.length:0}}]),t}();exports.default=p;
},{"./collision/CircleCollider":"Bjdp","./collision/Collision":"EouI","./collision/PolygonCollider":"XESg","./dynamics/solvePositions":"HMXu","./dynamics/solveVelocities":"KTNL","./graphics/Drawing":"Lw8n","./math/Vector":"BaiC"}],"D9zp":[function(require,module,exports) {
"use strict";function e(e,o){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=t(e))||o&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,d=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){d=!0,a=e},f:function(){try{l||null==i.return||i.return()}finally{if(d)throw a}}}}function t(e,t){if(e){if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=new Array(t);o<t;o++)i[o]=e[o];return i}var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var n=i(require("../Clock")),r=require("../common"),a=i(require("../dynamics/Body")),l=i(require("../Input")),d=i(require("../math/Vector")),u=i(require("../graphics/Drawing")),c=i(require("../collision/PolygonCollider")),f=i(require("../collision/CircleCollider")),s=i(require("../Engine")),h=r.initCanvas(),p=h.getContext("2d"),w=new l.default,y=new n.default,v=["#264653","#2A9D8F","#E9C46A","#F4A261","#E76F51"],g="#ebe6d1",m="#d1ccb6",S=function(){return v[Math.random()*v.length|0]},b=1,M=80,x=new s.default({timeStep:1,gravity:.07,linearAirDrag:1,rotationalAirDrag:1,linearMotionThreshold:.1,angularMotionThreshold:.001,velocitySolverOptions:{iterations:30,minBounceVelocity:0,restitution:.3,coefficientOfFriction:0},positionalSolverOptions:{iterations:7,positionalDamping:.25,allowedPenetration:0},broadphaseCellSize:100}),A=!1;function q(){for(var e=0,t=[new a.default({collider:new c.default(r.boxPolygon(h.width,M)),position:new d.default(h.width/2,h.height),isStatic:!0,color:m}),new a.default({collider:new f.default(100),position:new d.default(h.width/2,h.height/4),isStatic:!0,color:m}),new a.default({collider:new f.default(100),position:new d.default(h.width/2-200,h.height/2),isStatic:!0,color:m}),new a.default({collider:new f.default(100),position:new d.default(h.width/2+200,h.height/2),isStatic:!0,color:m}),new a.default({collider:new f.default(100),position:new d.default(0,h.height),isStatic:!0,color:m}),new a.default({collider:new f.default(100),position:new d.default(h.width,h.height),isStatic:!0,color:m})];e<t.length;e++){var o=t[e];x.bodies.push(o)}for(var i=0;i<1e3;i++){var n=.825*(10*Math.random()+20),l=Math.pow(n,2),u=l*Math.pow(n,2)*.5,s=void 0;s=Math.random()<.5?new f.default(.8*n):new c.default(r.polygon(Math.floor(6*Math.random())+3,n)),x.bodies.push(new a.default({collider:s,position:new d.default(Math.random()*h.width,Math.random()*h.height),angularVelocity:Math.random()-.5,velocity:d.default.polar(Math.random()*Math.PI*2,20*Math.random()),mass:l,inertia:u,color:S()}))}}function C(){y.nextFrame(),P(),F(),window.requestAnimationFrame(C)}function F(){var t,o=e(x.bodies);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(!i.isStatic){if(w.mouse.get(2)&&(i.velocity.y-=x.options.gravity*b),w.mouse.get(0)){var n=w.cursor.subtract(i.position),r=Math.max(n.length(),50);n=n.scale(-1e4/Math.pow(r,3)),i.velocity.x+=n.x*b,i.velocity.y+=n.y*b}var a=i.position.x,l=h.width;(a<-80||a>l+80)&&(i.position.y=-200,i.position.x=l/2,i.velocity.x=0,i.velocity.y=0,i.collider.onUpdatePosition())}}}catch(d){o.e(d)}finally{o.f()}x.fixedUpdate()}function P(){u.default.context=p,p.fillStyle=g,p.fillRect(0,0,h.width,h.height),A||x.renderToCanvas(p),p.fillStyle="red",p.font="24px Impact",p.fillText("FPS: "+y.averageFPS.toFixed(2),2,22),p.fillStyle="blue",p.font="24px Impact",p.fillText("Average penetration: "+x.averagePenetration().toFixed(2),2,44)}window.addEventListener("keypress",function(e){" "==e.key&&(A=!A)}),q(),C();
},{"../Clock":"BIAZ","../common":"gxTK","../dynamics/Body":"baw2","../Input":"et32","../math/Vector":"BaiC","../graphics/Drawing":"Lw8n","../collision/PolygonCollider":"XESg","../collision/CircleCollider":"Bjdp","../Engine":"Ku4o"}]},{},["D9zp"], null)
//# sourceMappingURL=polygonFountain.556fe777.js.map